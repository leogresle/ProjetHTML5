<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calendrier d'Événements</title>
  <style>
    /* Styles de base */
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-radius: 8px;
    }
    /* En-tête du calendrier */
    #calendar-header {
      text-align: center;
      margin-bottom: 20px;
    }
    /* Grille du calendrier */
    #calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .day, .day-header {
      border: 1px solid #ddd;
      padding: 10px;
      min-height: 80px;
      position: relative;
      border-radius: 4px;
      background: #fafafa;
    }
    .day-header {
      background: #f0f0f0;
      font-weight: bold;
      text-align: center;
    }
    .day-number {
      position: absolute;
      top: 5px;
      right: 5px;
      font-size: 12px;
      color: #666;
    }
    /* Style de l'événement (fond rose pâle) */
    .event {
      background: #ffe6f2;
      padding: 4px;
      margin-top: 5px;
      border-radius: 4px;
      font-size: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    /* Formulaire d'ajout d'événement */
    #event-form {
      display: none;
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fff;
    }
    #event-form input, #event-form textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #event-form button {
      padding: 10px 15px;
      border: none;
      background: #007BFF;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
    }
    #event-form button#close-form {
      background: #dc3545;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- En-tête du calendrier -->
    <div id="calendar-header">
      <h2 id="month-year">Mois et Année</h2>
    </div>
    <!-- Conteneur du calendrier -->
    <div id="calendar">
      <!-- Les en-têtes et jours seront générés par JS -->
    </div>
    <!-- Formulaire d'ajout d'événement -->
    <div id="event-form">
      <h3>Ajouter un Événement</h3>
      <input type="text" id="event-title" placeholder="Titre de l'événement">
      <textarea id="event-description" placeholder="Description"></textarea>
      <input type="datetime-local" id="event-datetime">
      <button id="add-event">Ajouter l'événement</button>
      <button id="close-form">Fermer</button>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const calendar = document.getElementById('calendar');
      const monthYear = document.getElementById('month-year');
      const eventForm = document.getElementById('event-form');
      const eventTitle = document.getElementById('event-title');
      const eventDescription = document.getElementById('event-description');
      const eventDatetime = document.getElementById('event-datetime');
      const addEventButton = document.getElementById('add-event');
      const closeFormButton = document.getElementById('close-form');

      let events = [];
    
      // Date actuelle pour l'affichage du calendrier
      const today = new Date();
      let currentMonth = today.getMonth();
      let currentYear = today.getFullYear();
    
      // Génération du calendrier pour le mois et l'année donnés
      function generateCalendar(month, year) {
        calendar.innerHTML = '';
    
        // Affichage de l'en-tête (mois et année)
        const options = { month: 'long', year: 'numeric' };
        const dateForHeader = new Date(year, month);
        monthYear.textContent = dateForHeader.toLocaleDateString('fr-FR', options);
    
        // Création des en-têtes de jours (Dim, Lun, Mar, ...)
        const dayNames = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];
        dayNames.forEach(dayName => {
          const dayHeader = document.createElement('div');
          dayHeader.classList.add('day-header');
          dayHeader.textContent = dayName;
          calendar.appendChild(dayHeader);
        });
    
        // Calcul du jour de la semaine du 1er jour du mois et du nombre de jours dans le mois
        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();
    
        // Cases vides avant le premier jour du mois
        for (let i = 0; i < firstDay; i++) {
          const emptyCell = document.createElement('div');
          emptyCell.classList.add('day');
          calendar.appendChild(emptyCell);
        }
    
        // Création des cellules pour chaque jour
        for (let day = 1; day <= lastDate; day++) {
          const dayCell = document.createElement('div');
          dayCell.classList.add('day');
          dayCell.setAttribute('data-day', day);
    
          // Affichage du numéro du jour
          const dayNumber = document.createElement('div');
          dayNumber.classList.add('day-number');
          dayNumber.textContent = day;
          dayCell.appendChild(dayNumber);
    
          // Ajout des événements pour ce jour, s'il y en a
          const dayEvents = events.filter(ev => {
            const evDate = new Date(ev.datetime);
            return evDate.getDate() === day &&
                   evDate.getMonth() === month &&
                   evDate.getFullYear() === year;
          });
          dayEvents.forEach(ev => {
            const eventDiv = document.createElement('div');
            eventDiv.classList.add('event');
            // Affichage du titre, de l'heure et de la description
            const time = ev.datetime.split('T')[1];
            eventDiv.innerHTML = `<strong>${ev.title}</strong><br>${time}<br>${ev.description}`;
            dayCell.appendChild(eventDiv);
          });
    
          // Au clic sur une cellule (en évitant les clics sur un événement déjà affiché), afficher le formulaire pré-rempli avec la date sélectionnée
          dayCell.addEventListener('click', (e) => {
            if(e.target.classList.contains('event')) return;
            const selectedDate = new Date(year, month, day);
            const yyyy = selectedDate.getFullYear();
            const mm = String(selectedDate.getMonth() + 1).padStart(2, '0');
            const dd = String(selectedDate.getDate()).padStart(2, '0');
            eventDatetime.value = `${yyyy}-${mm}-${dd}T00:00`;
            eventForm.style.display = 'block';
          });
    
          calendar.appendChild(dayCell);
        }
      }
    
      // Fonction pour ajouter un événement
      function addEvent() {
        const title = eventTitle.value.trim();
        const description = eventDescription.value.trim();
        const datetime = eventDatetime.value;
    
        if (title && description && datetime) {
          events.push({ title, description, datetime });
          generateCalendar(currentMonth, currentYear);
          // Réinitialiser et masquer le formulaire
          eventTitle.value = '';
          eventDescription.value = '';
          eventDatetime.value = '';
          eventForm.style.display = 'none';
        } else {
          alert('Veuillez remplir tous les champs.');
        }
      }
    
      addEventButton.addEventListener('click', addEvent);
      closeFormButton.addEventListener('click', () => {
        eventForm.style.display = 'none';
      });
    
      // Générer le calendrier au chargement de la page
      generateCalendar(currentMonth, currentYear);
    });
  </script>
</body>
</html>

<!-- maj -->